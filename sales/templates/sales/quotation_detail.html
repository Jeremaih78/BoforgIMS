{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Quotation {{ quotation.number }}</h3>
  <div class="d-flex gap-2">
    <a class="btn btn-sm btn-primary text-white" href="{% url 'quotation_pdf' quotation.id %}?preview=1" target="_blank">Print PDF</a>
    <a class="btn btn-sm btn-primary text-white" href="{% url 'quotation_pdf' quotation.id %}">Download PDF</a>
    <a class="btn btn-sm btn-primary" href="{% url 'quotation_to_invoice' quotation.id %}">Convert to Invoice</a>
  </div>
</div>
<div class="card p-3 mb-3">
  <div class="row"><div class="col">Customer: <strong>{{ quotation.customer }}</strong></div><div class="col">Date: {{ quotation.date }}</div></div>
</div>
<div class="card p-3 form-card">
  <h5>Add Item</h5>
  <form method="post">{% csrf_token %}
    {{ item_form.as_p }}
    <button class="btn btn-primary">Add</button>
  </form>
</div>
<div class="card p-3 mt-3">
  <h5>Items</h5>
  <table class="table">
    <thead><tr><th>Description</th><th class="text-end">Qty</th><th class="text-end">Unit Price</th><th class="text-end">Total</th></tr></thead>
    <tbody>{% for it in quotation.items.all %}
      <tr><td>{{ it.product|default:it.description }}</td><td class="text-end">{{ it.quantity }}</td><td class="text-end">{{ it.unit_price }}</td><td class="text-end">{{ it.total }}</td></tr>
    {% endfor %}</tbody>
    <tfoot><tr><th colspan="3" class="text-end">Total</th><th class="text-end">{{ quotation.total }}</th></tr></tfoot>
  </table>
</div>
{% endblock %}
